<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>MJEC Gallery</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
:root{
 --primary-blue:#002366;
 --darker-blue:#001a4d;
 --accent-gold:#FFD700;
 --text-white:#fff;
 --primary-blue-transparent: rgba(0, 35, 102, 0.95);
 --ticker-bg: #fff8e1;
 --nav-height: 90px;
 --nav-height-mobile: 70px;
 --top-bar-height: 40px;
 --bg-gradient: linear-gradient(135deg, #021133 0%, #031b4e 100%);
 --text-color: #ffffff;
 --accent-color: #FFD700;
 --accent-glow: rgba(255, 215, 0, 0.4);
}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:Poppins,sans-serif;background:#f3f4f6}

.top-bar {
  background-color: var(--darker-blue);
  height: var(--top-bar-height);
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0 5%;
  color: rgba(255, 255, 255, 0.8);
  font-size: 13px;
  z-index: 1002;
  position: relative;
}

.contact-info span {
  margin-right: 20px;
}

.contact-info i {
  color: var(--accent-gold);
  margin-right: 5px;
}

.social-icons a {
  color: rgba(255, 255, 255, 0.8);
  margin-left: 15px;
  transition: color 0.3s;
}

.social-icons a:hover {
  color: var(--accent-gold);
}

.navbar {
  background: var(--primary-blue-transparent);
  backdrop-filter: blur(10px);
  width: 100%;
  height: var(--nav-height);
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0 5%;
  position: sticky;
  top: 0;
  z-index: 1000;
  transition: all 0.4s ease;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.navbar.scrolled {
  height: 75px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
}

.brand-container {
  display: flex;
  align-items: center;
  gap: 15px;
  text-decoration: none;
  z-index: 1002;
}

.brand-container img {
  height: 55px;
  width: auto;
  border-radius: 8px;
  object-fit: contain;
  background: white;
  padding: 4px;
  transition: all 0.3s ease;
}

.navbar.scrolled .brand-container img {
  height: 45px;
}

.brand-text {
  display: flex;
  flex-direction: column;
}

.name-main {
  font-family: 'Playfair Display', serif;
  color: var(--text-white);
  font-size: 24px;
  font-weight: 700;
  line-height: 1;
  transition: font-size 0.3s ease;
}

.name-sub {
  font-family: 'Poppins', sans-serif;
  color: var(--accent-gold);
  font-size: 11px;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 2.5px;
  opacity: 0.9;
}

.hamburger {
  display: none;
  cursor: pointer;
  z-index: 1003;
  padding: 10px;
}

.bar {
  display: block;
  width: 28px;
  height: 3px;
  background-color: var(--text-white);
  margin: 6px 0;
  transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  border-radius: 3px;
}

.nav-links {
  display: flex;
  list-style: none;
  align-items: center;
  gap: 8px;
}

.nav-item {
  position: relative;
}

.nav-link {
  text-decoration: none;
  color: rgba(255, 255, 255, 0.9);
  font-weight: 500;
  font-size: 15px;
  padding: 10px 16px;
  border-radius: 20px;
  transition: all 0.3s ease;
  display: block;
}

.nav-link:hover {
  color: var(--text-white);
  background-color: rgba(255, 255, 255, 0.1);
  transform: translateY(-1px);
}

.news-ticker {
  background-color: var(--ticker-bg);
  border-bottom: 1px solid #e0d0a0;
  height: 35px;
  width: 100%;
  overflow: hidden;
  display: flex;
  align-items: center;
  position: relative;
  z-index: 999;
}

.ticker-label {
  background-color: var(--accent-gold);
  color: var(--primary-blue);
  font-size: 12px;
  font-weight: 700;
  padding: 0 15px;
  height: 100%;
  display: flex;
  align-items: center;
  z-index: 2;
  box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
  white-space: nowrap;
}

.ticker-content {
  white-space: nowrap;
  display: inline-block;
  animation: tickerMove 20s linear infinite;
  font-size: 13px;
  color: #333;
  font-weight: 500;
  padding-left: 100%;
}

@keyframes tickerMove {
  0% { transform: translate3d(0, 0, 0); }
  100% { transform: translate3d(-100%, 0, 0); }
}

.btn-login {
  background-color: var(--accent-gold);
  color: var(--primary-blue) !important;
  font-weight: 700;
  padding: 10px 28px;
  border-radius: 50px;
  box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
  margin-left: 10px;
  position: relative;
  overflow: hidden;
  display: inline-block;
}

.wrapper{
  max-width:1300px;
  margin:auto;
  padding:40px 20px
}

.page-title{
  font-size:32px;
  margin-bottom:20px;
  animation: fadeInDown 0.6s ease;
}

@keyframes fadeInDown {
  from {
    opacity: 0;
    transform: translateY(-20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.top-bar2{
  background:#fff;
  padding:15px;
  border-radius:8px;
  display:grid;
  grid-template-columns:1fr 200px;
  gap:10px;
  margin-bottom:25px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.05);
  animation: fadeIn 0.8s ease;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

#search {
  padding: 8px 12px;
  border: 2px solid #e2e8f0;
  border-radius: 6px;
  font-size: 14px;
  transition: all 0.3s ease;
}

#search:focus {
  outline: none;
  border-color: var(--accent-gold);
  box-shadow: 0 0 0 3px rgba(255, 215, 0, 0.1);
}

.event-grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(280px,1fr));
  gap:25px;
  animation: fadeInUp 1s ease;
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.event-card{
  background:#fff;
  border-radius:12px;
  overflow:hidden;
  box-shadow:0 4px 12px rgba(0,0,0,.1);
  transition: all 0.3s ease;
  cursor: pointer;
  animation: scaleIn 0.5s ease;
}

@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.9);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.event-card:hover{
  transform:translateY(-8px);
  box-shadow:0 8px 25px rgba(0,0,0,.15);
}

.event-card img{
  width:100%;
  height:200px;
  object-fit:cover;
  transition: transform 0.3s ease;
}

.event-card:hover img{
  transform: scale(1.05);
}

.card-body{padding:15px}

.card-body h3 {
  font-size: 18px;
  margin-bottom: 10px;
  color: var(--primary-blue);
}

.meta{
  display:flex;
  justify-content:space-between;
  font-size:13px;
  color: #666;
  margin-bottom: 8px;
}

.desc{
  font-size:13px;
  color: #888;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.loader{
  width:60px;
  height:60px;
  border:6px solid #ddd;
  border-top:6px solid var(--accent-gold);
  border-radius:50%;
  margin:80px auto;
  animation:spin 1s linear infinite
}

@keyframes spin{to{transform:rotate(360deg)}}

#backToTop {
  position: fixed;
  bottom: 20px;
  right: 20px;
  background-color: var(--accent-color);
  color: #031b4e;
  width: 45px;
  height: 45px;
  border-radius: 50%;
  display: none;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
  border: none;
  z-index: 1000;
  font-size: 1.1rem;
  transition: all 0.3s;
}

#backToTop:hover { 
  transform: translateY(-3px); 
  box-shadow: 0 6px 20px rgba(255, 215, 0, 0.5);
}

.site-footer {
  background: var(--bg-gradient);
  color: var(--text-color);
  margin-top: 60px;
  font-size: 14px;
  border-top: 3px solid var(--accent-color);
}

.footer-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 40px 20px;
  display: flex;
  gap: 40px;
}

.footer-section { flex: 1; }

h4 {
  color: var(--accent-color);
  font-size: 1.1rem;
  margin-bottom: 15px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  font-weight: 600;
}

.copyright {
  background-color: rgba(0, 0, 0, 0.3);
  text-align: center;
  padding: 15px;
  font-size: 0.85rem;
  color: #aaa;
}

/* MOBILE RESPONSIVE */
@media screen and (max-width: 950px) {
  .top-bar {
    display: none;
  }

  .navbar {
    height: var(--nav-height-mobile);
    padding: 0 20px;
  }

  .brand-container img {
    height: 40px;
  }

  .name-main {
    font-size: 18px;
  }

  .name-sub {
    font-size: 9px;
  }

  .hamburger {
    display: block;
  }

  .nav-links {
    position: fixed;
    top: 0;
    right: -100%;
    width: 80%;
    max-width: 300px;
    height: 100vh;
    background: linear-gradient(135deg, rgba(0, 35, 102, 0.98), rgba(0, 20, 60, 0.99));
    backdrop-filter: blur(15px);
    flex-direction: column;
    justify-content: flex-start;
    align-items: flex-start;
    padding: 100px 30px;
    transition: right 0.4s cubic-bezier(0.77, 0, 0.175, 1);
    box-shadow: -10px 0 50px rgba(0, 0, 0, 0.5);
    overflow-y: auto;
    gap: 15px;
  }

  .nav-links.active {
    right: 0;
  }

  .nav-item {
    width: 100%;
  }

  .nav-link {
    font-size: 18px;
    padding: 12px 0;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
  }

  .btn-login {
    margin: 20px 0 0 0;
    width: 100%;
    text-align: center;
  }

  .wrapper {
    padding: 20px 15px;
  }

  .page-title {
    font-size: 24px;
  }

  .top-bar2 {
    grid-template-columns: 1fr;
    gap: 10px;
    padding: 12px;
  }

  #search {
    width: 100%;
  }

  .event-grid {
    grid-template-columns: 1fr;
    gap: 20px;
  }

  .event-card img {
    height: 180px;
  }

  .footer-container {
    flex-direction: column;
    gap: 30px;
    padding: 30px 20px;
  }

  #backToTop {
    width: 40px;
    height: 40px;
    bottom: 15px;
    right: 15px;
    font-size: 1rem;
  }
}

@media screen and (max-width: 480px) {
  .nav-links {
    width: 85%;
  }

  .event-card img {
    height: 160px;
  }

  .page-title {
    font-size: 20px;
  }
}
</style>
</head>

<body>

<div class="top-bar">
  <div>üìû +91 7522089522 | ‚úâ mryjss@rediffmail.com</div>
  <div class="social-icons">
    <a href="#"><i class="fab fa-facebook-f"></i></a>
    <a href="#"><i class="fab fa-instagram"></i></a>
    <a href="#"><i class="fab fa-youtube"></i></a>
  </div>
</div>

<nav class="navbar">
  <a class="brand-container" href="#">
    <img src="logo.jpeg" alt="MJEC Logo">
    <div class="brand-text">
      <div class="name-main">Mary Jesus</div>
      <div class="name-sub">Education Centre</div>
    </div>
  </a>

  <div class="hamburger" id="hamburger">
    <span class="bar"></span>
    <span class="bar"></span>
    <span class="bar"></span>
  </div>

  <ul class="nav-links" id="menu">
    <li class="nav-item"><a class="nav-link" href="#">Home</a></li>
    <li class="nav-item"><a class="nav-link" href="#">Academics</a></li>
    <li class="nav-item"><a class="nav-link" href="#">Admission</a></li>
    <li class="nav-item"><a class="nav-link" href="notice.html">Notice</a></li>
    <li class="nav-item"><a class="nav-link" href="gallery.html">Gallery</a></li>
    <li class="nav-item"><a class="nav-link btn-login" href="login.html">Login</a></li>
  </ul>
</nav>

<div class="news-ticker">
  <div class="ticker-label">UPDATES</div>
  <div class="ticker-content">
    Admission Open 2025 ‚Ä¢ Result Declared ‚Ä¢ Sports Day 25 Jan
  </div>
</div>

<div class="wrapper">
  <h1 class="page-title">Photo Gallery</h1>

  <div class="top-bar2">
    <div>Total Events: <b id="total">0</b></div>
    <input id="search" placeholder="Search events...">
  </div>

  <div id="loader" class="loader"></div>
  <div id="events" class="event-grid"></div>
</div>

<button id="backToTop" title="Go to top"><i class="fas fa-arrow-up"></i></button>

<footer class="site-footer">
  <div class="footer-container">
    <div class="footer-section">
      <h4>Contact Us</h4>
      <p>üìç F 529, Barra 8, Kanpur, 208027</p>
      <p>üìû +91 75220 89522</p>
      <p>‚úâ mryjss@rediffmail.com</p>
    </div>

    <div class="footer-section">
      <h4>Quick Links</h4>
      <p><a href="#" style="color:#e0e0e0">Home</a></p>
      <p><a href="#" style="color:#e0e0e0">About Us</a></p>
      <p><a href="#" style="color:#e0e0e0">Academics</a></p>
      <p><a href="#" style="color:#e0e0e0">Gallery</a></p>
    </div>

    <div class="footer-section">
      <h4>Follow Us</h4>
      <div style="display:flex;gap:15px;font-size:1.5rem;">
        <a href="#" style="color:var(--accent-gold)"><i class="fab fa-facebook-f"></i></a>
        <a href="#" style="color:var(--accent-gold)"><i class="fab fa-instagram"></i></a>
        <a href="#" style="color:var(--accent-gold)"><i class="fab fa-youtube"></i></a>
      </div>
    </div>
  </div>

  <div class="copyright">
    <p>¬© <span id="year"></span> Mary Jesus Education Centre. All Rights Reserved.</p>
  </div>
</footer>

<script>
// Mobile Menu Toggle
const hamburger = document.getElementById('hamburger');
const menu = document.getElementById('menu');
const bars = document.querySelectorAll('.bar');

hamburger.addEventListener('click', () => {
  menu.classList.toggle('active');
  
  if (menu.classList.contains('active')) {
    bars[0].style.transform = "rotate(45deg) translate(5px, 6px)";
    bars[1].style.opacity = "0";
    bars[2].style.transform = "rotate(-45deg) translate(5px, -6px)";
  } else {
    bars[0].style.transform = "none";
    bars[1].style.opacity = "1";
    bars[2].style.transform = "none";
  }
});

// Close menu when clicking a link
document.querySelectorAll('.nav-link').forEach(link => {
  link.addEventListener('click', () => {
    if (window.innerWidth <= 950) {
      menu.classList.remove('active');
      bars[0].style.transform = "none";
      bars[1].style.opacity = "1";
      bars[2].style.transform = "none";
    }
  });
});

// Navbar scroll effect
window.addEventListener('scroll', () => {
  document.querySelector('.navbar').classList.toggle('scrolled', window.scrollY > 20);
});

// Back to top button
const backToTop = document.getElementById('backToTop');

window.addEventListener('scroll', () => {
  if (window.scrollY > 300) {
    backToTop.style.display = 'flex';
  } else {
    backToTop.style.display = 'none';
  }
});

backToTop.addEventListener('click', () => {
  window.scrollTo({ top: 0, behavior: 'smooth' });
});

// Set year
document.getElementById("year").innerText = new Date().getFullYear();

// Gallery functionality
let allEvents = [];

loadEvents();

async function loadEvents() {
  loader.style.display = "block";
  events.style.display = "none";
  
  try {
    const res = await fetch("https://cyan-sheep-842659.hostingersite.com/public-events");
    if (!res.ok) throw new Error("Server error: " + res.status);
    allEvents = await res.json();
  } catch(err) {
    console.log(err);
    events.innerHTML = '<p style="text-align:center;padding:40px;color:#666;">Error loading events. Please try again later.</p>';
  }

  loader.style.display = "none";
  events.style.display = "grid";
  showEvents(allEvents);
}

// ‚úÖ FORMAT DATE FUNCTION
function formatDate(dateString) {
  if (!dateString) return 'No date';
  
  const date = new Date(dateString);
  const options = { day: 'numeric', month: 'short' };
  return date.toLocaleDateString('en-US', options);
}

function showEvents(data) {
  total.innerText = data.length;
  events.innerHTML = "";

  if (data.length === 0) {
    events.innerHTML = '<p style="text-align:center;padding:40px;color:#666;grid-column:1/-1;">No events found</p>';
    return;
  }

  data.forEach((ev, index) => {
    const card = document.createElement('div');
    card.className = 'event-card';
    card.style.animationDelay = `${index * 0.1}s`;
    card.onclick = () => openEvent(ev.event);
    
    // ‚úÖ USE REAL DATE FROM DATABASE
    const eventDate = formatDate(ev.eventDate);
    
    card.innerHTML = `
      <img src="https://cyan-sheep-842659.hostingersite.com/${ev.cover}" alt="${ev.event}">
      <div class="card-body">
        <h3>${ev.event}</h3>
        <div class="meta">
          <span>üìÖ ${eventDate}</span>
          <span>üñº ${ev.count || 0}</span>
        </div>
        <div class="desc">${ev.event}</div>
      </div>
    `;
    
    events.appendChild(card);
  });
}

// Search functionality
search.addEventListener("input", () => {
  const v = search.value.toLowerCase();
  const filtered = allEvents.filter(e => e.event.toLowerCase().includes(v));
  showEvents(filtered);
});

function openEvent(name) {
  location = `event.html?e=${encodeURIComponent(name)}`;
}
</script>

</body>
</html>